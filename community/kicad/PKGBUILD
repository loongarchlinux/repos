# Maintainer: Filipe La√≠ns <lains@archlinux.org>
# Contributor: Rachel Mant <aur@dragonmux.network>

pkgname=kicad
pkgver=6.0.0
pkgrel=2
pkgdesc='Electronic schematic and printed circuit board (PCB) design tools'
arch=('loongarch64' 'x86_64')
url='http://kicad.org/'
license=('GPL')
depends=('wxgtk3' 'python' 'boost-libs' 'glew' 'curl' 'glm' 'ngspice' 'opencascade' 'python-wxpython')
makedepends=('cmake' 'mesa' 'boost' 'swig' 'ninja')
optdepends=('kicad-library: for footprints and symbols'
            'kicad-library-3d: for 3d models of components')
source=("https://gitlab.com/kicad/code/kicad/-/archive/$pkgver/kicad-$pkgver.tar.bz2")
sha512sums=('1267b7cd35a63a3f26c2e9b0695722cbb9b279d1326f52f0b8497bd3011d79a5732e6da27f6413fb72064fe2aca72da95252011c6cb0b70c209f296f40a77b90')

build()
{
  mkdir $pkgname-$pkgver/build
  cd $pkgname-$pkgver/build

  cmake .. -G Ninja \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DKICAD_USE_OCC=ON \
    -DKICAD_SCRIPTING_WXPYTHON=ON \
    -DwxWidgets_CONFIG_EXECUTABLE=/usr/bin/wx-config-gtk3 \
    -Wno-dev

  ninja
}

package()
{
  cd $pkgname-$pkgver/build

  DESTDIR="$pkgdir" ninja install
}

# vim:set ts=2 sw=2 et:
