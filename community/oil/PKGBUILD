# Maintainer: George Rawlinson <grawlinson@archlinux.org>
# Contributor: Yigit Sever <yigit at yigitsever dot com>
# Contributor: Qontinuum <qontinuum@artixlinux.org>
# Contributor: timetoplatypus <timetoplatypus@protonmail.com>
# Contributor: andychu <andy@oilshell.org>

pkgname=oil
pkgver=0.9.6
pkgrel=1
pkgdesc="A new Unix shell"
arch=('loongarch64' 'x86_64')
url="https://www.oilshell.org"
license=('Apache')
depends=('readline')
makedepends=('bash')
replaces=('osh')
install=oil.install
options=('!lto' '!strip')
source=("$url/download/$pkgname-$pkgver.tar.xz")
sha512sums=('541834c75ee9253370edbadc503e96d5a6cad7ea0447b797fe215266a4926e15a4d0c4549153cedef79781768a8e17697fe136b8716ca4355f23a667cfc4244c')
b2sums=('148cb2ef2fbee45e16b267484038576833447c7d6dda2be9c25ea6859bda2be948d5ff0f338dec4dc9dbd83ff9a59c42b900f3be1a65fa00fbcf1e0d7ba06128')

build() {
	cd "$pkgname-$pkgver"

	./configure \
    --prefix=/usr \
    --with-readline

	make
}

package() {
	cd "$pkgname-$pkgver"

	make DESTDIR="$pkgdir" install
}
