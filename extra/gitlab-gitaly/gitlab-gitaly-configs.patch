commit d9df4f7d9579d46205c222c3bcdacd4097514ea2
Author: Anatol Pomozov <anatol.pomozov@gmail.com>
Date:   Tue Jun 21 09:35:40 2022 -0700

    Patch config files with Arch Linux specific locations
    
    Arch uses upstream's default config files as a base for its configs.
    But directory structure at Arch is completely different from the default
    one specified by gitlab project.
    We used to have a lot of seds expressions to adjust the files but as
    complexity of configs grew 'sed' makes it easy to miss a changed/added
    option.
    
    Track set of diffs as a patch. If upstream modifies config file then it
    will cause a conflict that needs to be reviewed manually.

diff --git a/config.toml.example b/config.toml.example
index aa434f288..7878dc927 100644
--- a/config.toml.example
+++ b/config.toml.example
@@ -2,15 +2,15 @@
 # For Gitaly documentation, see https://docs.gitlab.com/ee/administration/gitaly/
 
 # A path which Gitaly should open a Unix socket.
-socket_path = "/home/git/gitlab/tmp/sockets/private/gitaly.socket"
+socket_path = "/run/gitlab/gitlab-gitaly.socket"
 
 # Directory containing Gitaly executables.
-bin_dir = "/home/git/gitaly/_build/bin"
+bin_dir = "/usr/bin"
 
 # # Optional. The directory where Gitaly can create all files required to
 # # properly operate at runtime. If not set, Gitaly will create a directory in
 # # the global temporary directory. This directory must exist.
-# runtime_dir = "/home/git/gitaly/run"
+# runtime_dir = "/run/gitlab/gitaly/run"
 
 # # Optional if socket_path is set. TCP address for Gitaly to listen on. This is insecure (unencrypted connection).
 # listen_addr = "localhost:9999"
@@ -35,9 +35,9 @@
 # # Gitaly supports TLS encryption. You must bring your own certificates because this isnâ€™t provided automatically.
 # [tls]
 # # Path to the certificate.
-# certificate_path = '/home/git/cert.cert'
+# certificate_path = '/var/lib/gitlab/cert.cert'
 # # Path to the key.
-# key_path = '/home/git/key.pem'
+# key_path = '/var/lib/gitlab/key.pem'
 
 # # Git settings
 # [git]
@@ -53,7 +53,7 @@
 # # The name of the storage
 name = "default"
 # # The path to the storage.
-path = "/home/git/repositories"
+path = "/var/lib/gitlab/repositories"
 
 # # You can optionally configure more storages for this Gitaly instance to serve up
 #
@@ -65,7 +65,7 @@
 # # You can optionally configure Gitaly to output JSON-formatted log messages to stdout
 # [logging]
 # # The directory where Gitaly stores extra log files
-dir = "/home/git/gitlab/log"
+dir = "/var/log/gitlab"
 # format = "json"
 # # Optional. Set log level to only log entries with that severity or above
 # # One of, in order: debug, info, warn, errror, fatal, panic
@@ -80,11 +80,11 @@
 # grpc_latency_buckets = [0.001, 0.005, 0.025, 0.1, 0.5, 1.0, 10.0, 30.0, 60.0, 300.0, 1500.0]
 
 [hooks]
-custom_hooks_dir = "/home/git/custom_hooks"
+custom_hooks_dir = "/var/lib/gitlab/custom_hooks"
 
 [gitlab]
-secret_file = "/home/git/gitlab-shell/.gitlab_shell_secret"
-url = "http+unix://%2Fhome%2Fgit%2Fgitlab%2Ftmp%2Fsockets%2Fgitlab-workhorse.socket"
+secret_file = "/etc/webapps/gitlab-shell/secret"
+url = "http+unix://%2Frun%2Fgitlab%2Fgitlab-workhorse.socket"
 # Only needed if a UNIX socket is used in `url` and GitLab is configured to
 # use a relative path (e.g. /gitlab).
 # relative_url_root = '/'
